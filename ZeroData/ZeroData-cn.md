# Zero Data白皮书

## 感谢您对Zero Data的关注

Zero Data 通过提供一种更好、更简单的方法来保护您的数据库安全，帮助组织提高数据库安全性。

本文档包含的信息旨在向客户和潜在客户提供有关Zero Data安全状况、实践和流程。Zero Data 确保数据库安全是一个持续改进的过程，我们会持续的评估和支持。

## 项目背景

在当前大环境下，越来越多的应用程序迁移到云中或由第三发平台提供商提供，越来越多的用户在家中或者公共场所等远程工作，这会让网络环境更复杂，从而带来的数据安全问题也更加突出，包括数据库访问安全，连接信息安全等。所以Zero Data 针对数据库安全作出自己的思考，基于零信任网络访问，实现特有的数据库安全访问体系。

**数据库访问安全**：网络安全公司Imperva在研究中表明，其扫描的数据库有接近一半包含CVE漏洞。因此对于数据的访问授权和安全保护至关重要。然而大多数企业没有进行足够行之有效的保护。

**连接信息安全**：由于普通开发和运维人员能够接触到服务的开发容器和线上服务运行的容器，以方便的进行排查问题。而数据库连接信息是暴露在环境变量中的，因此可能发生初级人员利用连接信息直连数据库，进行数据修改破坏正常的开发迭代流程造成隐患。以及由于误操作将整个数据库数据删除。因此开发此系统将数据库连接信息隐藏，杜绝大部分开发运维人员可以获取到数据库连接信息情况。

## 产品架构设计

### 设计理念

Zero Data 的设计初衷是为访问数据库提供一个安全的解决方案。现在访问数据库形式多样化:

- 大多数项目访问数据库均为明文配置数据库连接信息；
- 数据库访问控制大多数利用数据库账号密码控制; 
- 数据库访问越来越基于云或由第三方管理。

因此，传统的数据库访问形式无法满足当今的安全性或可用性需求。Zero Data提供的是一种基于零信任访问概念的方法。

### 零信任访问(ZTA)

统一管理入口

- 提供统一可视化平台完成所有访问控制、安全策略及机密信息管理。

最小特权原则权限控制

- 权限控制可以针对实例、库、表、字段进行设置。权限产品闭环，访问人员不会接触到实际数据库账户密码。
- 提供基于角色的用户权限策略，可以灵活配置不同用户权限，支持查询、变更不同的安全权限。
- 应对事件进行详细记录，以支持监控、检测、调查和其他分析。 

零侵入数据安全增强

- 以零侵入方式提高安全性，业务代码无需任何更改。借助数据面对身份、认证、授权进行支持。
- 以零信任方式默认启用无处不在的加密及验证，增强数据传输和数据访问安全性。
- 敏感数据例如数据库访问账号密码等进行加密存储，借助数据面代理使用方无需接触真实密码信息，降低泄露的可能。
- 通过私有结构代理可以避免对数据库的直接访问或者公网暴露，保证所有的访问都是基于授权的。

自动化的威胁缓解**、**补救及安全审计、风险报告

- 提供对数据库访问行为的记录，对风险行为进行告警提示，并提供事后的追踪分析的能力。
- 提供各种报表及图标统计功能，自动化实现可视性、根据控制访问策略及历史行为分析进行高危行为阻截、实施持续的监控。

动态脱敏支持

- 通过数据面可以实现动态的数据脱敏，从源头保护关键信息不被泄露。使得开发和测试人员可以访问信息但是无法查看不应该看到的敏感内容。

概括地说，这些原则在我们的产品中以下列方式体现出来:

- 用户和数据流授权总是通过多个组件运行多个检查来确认。此外，用户数据流和用户身份验证流由单独的组件处理，并且需要单独的验证检查。
- 我们将用户身份认证委托给第三方身份认证提供商(IdP )，提供了额外的安全层。
- 我们支持广泛的日志记录，提供增强的可见性，帮助管理员监控、故障排除和调查整个网络和终端的活动，包括未经授权的活动，以及被授权访问资源但可能超出其业务权限的个人的活动。

从客户的角度来看，我们的产品架构在以下方面提供了额外的安全优势:

- **隐藏网络** - Zero Data 不会将接入点公开暴露在您的网络中，以促进对网络内部资源的安全远程访问，对连接方进行强识别。可以将攻击勒索软件拦截在访问数据库之前
- **保护数据库账户信息 **- Zero Data 中间件可以代理目标服务的数据库请求，解析数据库协议。因此使用数据库的服务向中间件发起连接时，所使用的的用户名密码仅仅是一个唯一key标记。中间件可以并将用户名和密码等验证信息替换为真实的验证信息，向真正的数据库服务发起连接验证请求。代理目标服务的数据库请求。这样可以达到服务在不接触真实密码等信息情况下完成数据获取。
- **运行时数据保密** - 有些机密数据例如：第三方系统的token、上面提到的数据连接信息等，通常需要很好的加密保存。通过平台管理模块，可以将这部分信息安全的存储到机密存储组件中，通过零信任运行时功能，可以安全的取出此类数据供目标服务使用。
- **集中记录所有网络活动** - 数据面可以方便的验证访问方是否有权限访问对应的信息，以及可以灵活的根据请求上下文中包含的信息构建授权策略。同时记录访问方的行为，可以用于后续的分析和审计。
- **为管理员提供更好的可用性** - 更易于配置和维护的解决方案更不容易出错，而且更有效

### 架构&组件概述

本节高度概括了构成 Zero Data 架构的主要组件及其交互方式。

![image-20220518142331098](https://user-images.githubusercontent.com/52234994/169484736-0956e8fe-8ec9-40c3-baf5-72d483cb6910.png)

Zero Data 保护数据库的访问。它们共同确保只有经过身份验证的用户才能访问他们有权访问的资源。 Zero Data 完全配置后，最终结果是授权用户可以数据库，而不需要了解底层网络配置。主要组成部分是:

- 控制平面 - 接收管理平台下发的控制策略，动态调控安全策略，接收数据平面上报合规性证据，遥测数据等
- 数据平面 - 接收控制平台下发的控制策略，策略的实施者，提供运行时数据安全保护
- 管理平台 - 提供了数据库访问监控、编排和修复所需的自动化自助服务工具。
- 私有代理 - 当跨公网网络访问数据的时候需要防止数据库直接暴露在公网上，采用在数据库之前部署私有代理的方式，对连接方进行强识别。可以将攻击勒索软件拦截在访问数据库之前。

## 应用场景

### 保护数据库账户信息

Zero Data 数据库中间件可以代理目标服务的数据库请求，解析数据库请求协议。因此使用数据库的服务向中间件发起连接时，所使用的的用户名密码仅仅是一个唯一key标记。

中间件可以并将用户名和密码等验证信息替换为真实的验证信息，向真正的数据库服务发起连接验证请求。代理目标服务的数据库请求。这样可以达到服务在不接触真实密码等信息情况下完成数据获取。

### 零信任的数据库访问

- Zero Data 作为数据面可以完成对访问的身份校验、认证、授权。其配置受控制面动态调控。通过控制面和数据面结合的方式可以方便精细控制每个服务/用户的权限，以最小特权原则来进行数据访问控制。
- 私有代理结构：当跨公网网络访问数据的时候需要防止数据库直接暴露在公网上，采用在数据库之前部署私有代理的方式，对连接方进行强识别。可以将攻击勒索软件拦截在访问数据库之前。
- 批准和审计：数据面可以方便的验证访问方是否有权限访问对应的信息，以及可以灵活的根据请求上下文中包含的信息构建授权策略。同时记录访问方的行为，可以用于后续的分析和审计。

### 运行时数据保密

有些机密数据例如：第三方系统的token、上面提到的数据连接信息等，通常需要很好的加密保存。通过平台管理模块，可以将这部分信息安全的存储到机密存储组件中，通过零信任运行时功能，可以安全的取出此类数据供目标服务使用。

## 产品价值

### 安全挑战

在ZeroData平台建设中，有很多安全问题以及困难需要突破：

- **安全厂商报告表明，大量数据库包含CVE漏洞**：网络安全公司Imperva在研究中表明，其扫描的数据库有接近一半包含CVE漏洞。恶意人员的未授权访问可能会造成数据的泄露和永久丢失。
- **基于网络位置的网关和防火墙安全策略并不可靠**：网络位置并不意味着信任，采用这种方式只要攻破了最外层屏障，所有数据都会失去安全屏障。而且伴随着云原生进程，网络环境也愈发的复杂。因此必须采用零信任的方式进行验证。
- **基于连接的授权访问粒度太大**：即使在接受连接之前对发起方进行验证，确保是一个合法的使用方发起的连接。仍然不能保证其访问的资源没有超出其应有的授权范围。因此必须采用最小特权原则，并针对每个资源访问进行单独评估其针对请求者的信任。
- **难以达成对系统安全状态评估**：必须有足够的遥测数据记录以及分析支撑对于当前系统的安全性评估。并尽可能提供可视化的面板或者工具来直观体现系统目前的安全状态。
- **用户的身份验证通常是动态的**：各种权限以及策略通常是动态调控的，并需要在允许访问访问之前进行严格验证。这是一个不断访问、扫描、评估威胁、更新策略、不断验证的循环。

### 核心优势

**Netfoundry**公司通过agent以及私有结构代理覆盖数据库连接的两端。可以在不借助防火墙的同时完成强识别、身份验证、授权。
我们方案在支持零信任以及私有结构代理基础上，可以通过平台对策略进行方便的管控以及可视化展示。

**Oracle**公司提出零信任安全模型，从防止攻击、检测攻击意图、入侵补救、时间分析等角度来保护用户数据。

我们的方案完全支持零信任的功能，并且适配复杂的云原生环境：

- **识别安全漏洞** - 通过平台集中处理安全操作，提高可视性。记录、分析数据访问行为，提供危险预警及事后分析支持
- **防护攻击行为** - 私有化代理防止数据库公网暴露；数据面进行细粒度控制及鉴权，实时感知安全策略变化进行防护。
- **数据加密保护** - 敏感信息机密存储到机密存储组件中，平台提供策略管控，零信任提供数据安全保证。
- **降低风险** - 使用安全第一的设计原则降低来自持续威胁的风险。使用最低权限访问等技术也有助于遵守合规性和隐私法规。通过管理良好的身份，组织可以更好地控制用户访问，从而降低内部和外部违规的风险。

### 可持续发展

伴随着云服务的使用越来越多，将会有更多的安全问题暴露出来，伴随的急需防护的安全问题，也将会有更多竞品在思考数据库安全访问，也会有更多的数据库访问安全方式。这就需要我们在大环境中，提出自身特有的优势，特有的零信任数据库安全，并不断创新。

从标准外围安全方法调整为零信任模型的组织可以利用自动化、安全性和治理，从而增强其整体竞争优势和业务敏捷性，从而提高自身竞争优势。

以下是我们的实际进展以及接下来的路线图，并将持续的支持与开拓Zero Data：

- 2022.10 增加零信任PKI建设，包括CA和OCSP服务
- 2022.11 增加私有化代理结构及其控制面功能
- 2022.12 进行授权、验证的功能完善，包括数据面功能和控制面功能
- 2023.02 丰富可观测性数据收集，进行自动化的数据分析建设
- 2023.04 进行管理平台的开源，提供管理数据的面板
- 2023.05 对更多数据库系统进行数据保护功能支持
- 2023.07 机密信息使用及管理功能完善
- 2023.10 零信任平台持续监控功能丰富，对高危行为建立预警体系
- 2023.12 进行安全调查、异常检测、合规性证据功能模块建设

## 团队优势

我们不是一个人在战斗，而是一组对零信任安全、对数据库安全、对Zero Trust 有着执着追求的一批人在战斗。

未来我们将按照我们的规划，将不断完善开拓数据库访问安全、社区的参与规则与进阶规则，完善开发者文档，降低开发者参与的门槛增加开发者参与的荣誉感。打造一个成熟的云原生环境下基于零信任的运行时数据保密系统。